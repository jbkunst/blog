{
  "hash": "9519fecd6383c8d8ec484e9e9c4985ce",
  "result": {
    "markdown": "---\ntitle: \"Simulating and watching autoregressive processes\"\ndescription: Always love time series when I studied statistics. This is a post to honor the time series (no {shiny} required).\ndate: 2021-06-18\ncategories: [minipost, stats, highcharts, highcharter, time-series, data-visualization]\nimage: images/preview.gif\n---\n\n\n\n\n## The model\n\nAn autoregressive model of order $p$, $AR(p)$, is defined as:\n\n$${\\displaystyle X_{t}=c+\\sum _{i=1}^{p}\\varphi _{i}X_{t-i}+\\varepsilon _{t}\\,}$$\n\nWhere $\\varepsilon_t$ is a *White Noise*, $c$, $\\varphi_i$ parameters of the model. The structure of this model is easy of understand: The next value $X_t$ is a linear combination of the past values plus a random noise -or innovation-.\n\nIn R we can simulate this model with `stats::arima.sim` function for example, if we want simulate an $AR(1)$ with $\\varphi _{1} = \\varphi = 0.9$ with $0$ mean:\n\n$${\\displaystyle X_{t}= \\varphi X_{t-i} + \\varepsilon _{t} = 0.9 \\times X_{t-i} + \\varepsilon _{t}\\,}$$ We code:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nar_model <-  list(ar = c(0.9))\n\narima.sim(model = ar_model, n = 20)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nTime Series:\nStart = 1 \nEnd = 20 \nFrequency = 1 \n [1] -1.0615712 -3.3427201 -2.9095297 -1.5579658 -2.6942738 -3.6786334\n [7] -3.3995961 -2.5009399 -3.6425151 -2.7769243 -2.9941547 -3.6164653\n[13] -1.5792640 -1.6316549  0.2458082 -0.2222871  0.5333117  1.7562844\n[19]  0.2204732 -0.3471451\n```\n:::\n:::\n\n\n## Interactivity\n\nThere is a popular example in highcharts: *Dynamic Update* where each second a random value is added to the line series https://www.highcharts.com/demo/dynamic-update.\n\nThe key part of this example is the next function which every second generate a random value and then is added to the series.\n\n\n::: {.cell}\n\n```{.js .cell-code}\n// This is Javascript code :) :/ :S XD\nfunction () {\n    // set up the updating of the chart each second\n    var series = this.series[0];\n    setInterval(function () {\n        var x = (new Date()).getTime(), // current time\n            y = Math.random();\n        series.addPoint([x, y], true, true);\n    }, 1000);\n}\n```\n:::\n\n\nWe'll take the example as a template and change to store the last values of the process and generate the random noise and the new value. To get the linear combination between the past values and the autoregressive parameter we used the dot product. For the generation of a normal random number we can use the the Box-Muller transform.\n\n<aside>\n\n*Dot product of two arrays in Javascript* https://stackoverflow.com/a/64816824/829971\n\n*Generating random normal number in Javascript* https://stackoverflow.com/a/36481059/829971\n\n</aside>\n\nLet's create some\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(highcharter)\nlibrary(stringr)\n\n# model\nar <-  c(0.85, -0.1, 0.2)\n\n# time to update the chart in seconds\ntime <- 1\n\n# the first values of the model\nts <- as.vector(arima.sim(model = list(ar = ar), n = 10))\nts <- round(ts, 3)\nts\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] -4.172 -6.993 -6.458 -6.460 -5.176 -5.944 -5.448 -5.063 -4.854 -5.728\n```\n:::\n:::\n\n\nThe function would be something like this:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nload_fn <- \"function () {{\n\n\tdot = (a, b) => a.map((x, i) => a[i] * b[i]).reduce((m, n) => m + n);\n  function randn_bm() {{\n  \tvar u = 0, v = 0;\n    while(u === 0) u = Math.random(); //Converting [0,1) to (0,1)\n    while(v === 0) v = Math.random();\n    return Math.sqrt( -2.0 * Math.log( u ) ) * Math.cos( 2.0 * Math.PI * v );\n   }}\n  \n\tvar dat = [{ data }];\n  var ar = [{ ar }];\n  dat = dat.slice(-ar.length);\n  \n  // set up the updating of the chart each second\n  var series = this.series[0];\n  \n  setInterval(function () {{\n      \n      console.log(dat);\n      var new_value = dot(dat, ar) + randn_bm();\n      new_value = Math.round(1000 * new_value)/1000\n      console.log(new_value)\n      dat.shift(); \n      dat.push(new_value);\n      series.addPoint([new_value]);  \n      \n      //if (series.data.length < 500) {{\n      //  series.addPoint([new_value], true, false);\n      //}} else {{\n      //  series.addPoint([new_value], true, true);\n      //}}\n      \n  }}, { time });\n  \n}}\"\n\nload_fn_glued <- str_glue(\n  load_fn,\n  data = str_c(ts, collapse = \",\"),\n  ar = str_c(ar, collapse = \",\"),\n  time = time * 1000\n)\n\nload_fn_glued\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nfunction () {\n\n\tdot = (a, b) => a.map((x, i) => a[i] * b[i]).reduce((m, n) => m + n);\n  function randn_bm() {\n  \tvar u = 0, v = 0;\n    while(u === 0) u = Math.random(); //Converting [0,1) to (0,1)\n    while(v === 0) v = Math.random();\n    return Math.sqrt( -2.0 * Math.log( u ) ) * Math.cos( 2.0 * Math.PI * v );\n   }\n  \n\tvar dat = [-4.172,-6.993,-6.458,-6.46,-5.176,-5.944,-5.448,-5.063,-4.854,-5.728];\n  var ar = [0.85,-0.1,0.2];\n  dat = dat.slice(-ar.length);\n  \n  // set up the updating of the chart each second\n  var series = this.series[0];\n  \n  setInterval(function () {\n      \n      console.log(dat);\n      var new_value = dot(dat, ar) + randn_bm();\n      new_value = Math.round(1000 * new_value)/1000\n      console.log(new_value)\n      dat.shift(); \n      dat.push(new_value);\n      series.addPoint([new_value]);  \n      \n      //if (series.data.length < 500) {\n      //  series.addPoint([new_value], true, false);\n      //} else {\n      //  series.addPoint([new_value], true, true);\n      //}\n      \n  }, 1000);\n  \n}\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nhighchart() %>% \n  hc_add_series(data = ts) %>% \n  hc_chart(\n    events = list(load = JS(load_fn_glued)), \n    animation = list(duration = time*1000/2)\n    )\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"highchart html-widget html-fill-item\" id=\"htmlwidget-4869deb022ae95099c93\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-4869deb022ae95099c93\">{\"x\":{\"hc_opts\":{\"chart\":{\"reflow\":true,\"events\":{\"load\":\"function () {\\n\\n\\tdot = (a, b) => a.map((x, i) => a[i] * b[i]).reduce((m, n) => m + n);\\n  function randn_bm() {\\n  \\tvar u = 0, v = 0;\\n    while(u === 0) u = Math.random(); //Converting [0,1) to (0,1)\\n    while(v === 0) v = Math.random();\\n    return Math.sqrt( -2.0 * Math.log( u ) ) * Math.cos( 2.0 * Math.PI * v );\\n   }\\n  \\n\\tvar dat = [-4.172,-6.993,-6.458,-6.46,-5.176,-5.944,-5.448,-5.063,-4.854,-5.728];\\n  var ar = [0.85,-0.1,0.2];\\n  dat = dat.slice(-ar.length);\\n  \\n  // set up the updating of the chart each second\\n  var series = this.series[0];\\n  \\n  setInterval(function () {\\n      \\n      console.log(dat);\\n      var new_value = dot(dat, ar) + randn_bm();\\n      new_value = Math.round(1000 * new_value)/1000\\n      console.log(new_value)\\n      dat.shift(); \\n      dat.push(new_value);\\n      series.addPoint([new_value]);  \\n      \\n      //if (series.data.length < 500) {\\n      //  series.addPoint([new_value], true, false);\\n      //} else {\\n      //  series.addPoint([new_value], true, true);\\n      //}\\n      \\n  }, 1000);\\n  \\n}\"},\"animation\":{\"duration\":500}},\"title\":{\"text\":null},\"yAxis\":{\"title\":{\"text\":null}},\"credits\":{\"enabled\":false},\"exporting\":{\"enabled\":false},\"boost\":{\"enabled\":false},\"plotOptions\":{\"series\":{\"label\":{\"enabled\":false},\"turboThreshold\":0},\"treemap\":{\"layoutAlgorithm\":\"squarified\"}},\"series\":[{\"data\":[-4.172,-6.993,-6.458,-6.46,-5.176,-5.944,-5.448,-5.063,-4.854,-5.728]}]},\"theme\":{\"colors\":[\"#d35400\",\"#2980b9\",\"#2ecc71\",\"#f1c40f\",\"#2c3e50\",\"#7f8c8d\"],\"chart\":{\"style\":{\"fontFamily\":\"-apple-system, BlinkMacSystemFont, \\\"Segoe UI\\\", Roboto, Helvetica, Arial, sans-serif, \\\"Apple Color Emoji\\\", \\\"Segoe UI Emoji\\\", \\\"Segoe UI Symbol\\\"\",\"color\":\"#666666\"}},\"title\":{\"align\":\"left\",\"style\":{\"fontFamily\":\"-apple-system, BlinkMacSystemFont, \\\"Segoe UI\\\", Roboto, Helvetica, Arial, sans-serif, \\\"Apple Color Emoji\\\", \\\"Segoe UI Emoji\\\", \\\"Segoe UI Symbol\\\"\",\"fontWeight\":\"bold\"}},\"subtitle\":{\"align\":\"left\",\"style\":{\"fontFamily\":\"-apple-system, BlinkMacSystemFont, \\\"Segoe UI\\\", Roboto, Helvetica, Arial, sans-serif, \\\"Apple Color Emoji\\\", \\\"Segoe UI Emoji\\\", \\\"Segoe UI Symbol\\\"\"}},\"legend\":{\"align\":\"right\",\"verticalAlign\":\"bottom\",\"itemStyle\":{\"fontWeight\":\"normal\",\"color\":\"#A2A39C\"}},\"xAxis\":{\"gridLineWidth\":1,\"gridLineColor\":\"#F3F3F3\",\"lineColor\":\"#F3F3F3\",\"minorGridLineColor\":\"#F3F3F3\",\"tickColor\":\"#F3F3F3\",\"tickWidth\":1},\"yAxis\":{\"gridLineColor\":\"#F3F3F3\",\"lineColor\":\"#F3F3F3\",\"minorGridLineColor\":\"#F3F3F3\",\"tickColor\":\"#F3F3F3\",\"tickWidth\":1},\"plotOptions\":{\"line\":{\"marker\":{\"enabled\":false}},\"spline\":{\"marker\":{\"enabled\":false}},\"area\":{\"marker\":{\"enabled\":false}},\"areaspline\":{\"marker\":{\"enabled\":false}},\"arearange\":{\"marker\":{\"enabled\":false}},\"bubble\":{\"maxSize\":\"10%\"}},\"credits\":{\"style\":{\"fontFamily\":\"-apple-system, BlinkMacSystemFont, \\\"Segoe UI\\\", Roboto, Helvetica, Arial, sans-serif, \\\"Apple Color Emoji\\\", \\\"Segoe UI Emoji\\\", \\\"Segoe UI Symbol\\\"\"}}},\"conf_opts\":{\"global\":{\"Date\":null,\"VMLRadialGradientURL\":\"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png\",\"canvasToolsURL\":\"http =//code.highcharts.com/list(version)/modules/canvas-tools.js\",\"getTimezoneOffset\":null,\"timezoneOffset\":0,\"useUTC\":true},\"lang\":{\"contextButtonTitle\":\"Chart context menu\",\"decimalPoint\":\".\",\"downloadCSV\":\"Download CSV\",\"downloadJPEG\":\"Download JPEG image\",\"downloadPDF\":\"Download PDF document\",\"downloadPNG\":\"Download PNG image\",\"downloadSVG\":\"Download SVG vector image\",\"downloadXLS\":\"Download XLS\",\"drillUpText\":\"◁ Back to {series.name}\",\"exitFullscreen\":\"Exit from full screen\",\"exportData\":{\"annotationHeader\":\"Annotations\",\"categoryDatetimeHeader\":\"DateTime\",\"categoryHeader\":\"Category\"},\"hideData\":\"Hide data table\",\"invalidDate\":null,\"loading\":\"Loading...\",\"months\":[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"noData\":\"No data to display\",\"numericSymbolMagnitude\":1000,\"numericSymbols\":[\"k\",\"M\",\"G\",\"T\",\"P\",\"E\"],\"printChart\":\"Print chart\",\"resetZoom\":\"Reset zoom\",\"resetZoomTitle\":\"Reset zoom level 1:1\",\"shortMonths\":[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"shortWeekdays\":[\"Sat\",\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\"],\"thousandsSep\":\" \",\"viewData\":\"View data table\",\"viewFullscreen\":\"View in full screen\",\"weekdays\":[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"]}},\"type\":\"chart\",\"fonts\":\"-apple-system,+BlinkMacSystemFont,+\\\"Segoe+UI\\\",+Roboto,+Helvetica,+Arial,+\\\"Apple+Color+Emoji\\\",+\\\"Segoe+UI+Emoji\\\",+\\\"Segoe+UI+Symbol\\\"\",\"debug\":false},\"evals\":[\"hc_opts.chart.events.load\"],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\nAnd it works perfectly in the first try! Nah! This take me some time in the [jsfiddle](https://jsfiddle.net/gh/get/library/pure/highcharts/highcharts/tree/master/samples/highcharts/demo/dynamic-update).\n\n> All according to keikaku.\n\n## Improving it\n\nWe can improve the chart doing for example:\n\n-   Make a `plotLine` in y axis at the value 0 to show as reference.\n\n-   Make a second yAxis to the right showing the last generated value, this can be done using the next function in the `tickPositioner`argument.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntick_post_fn <- \"function(min,max){        \n  var data = this.chart.yAxis[0].series[0].processedYData;\n  //last point\n  return [Math.round(1000 * data[data.length-1])/1000]; \n}\"\n```\n:::\n\n\n-   Enable the navigator panel `hc_navigator(enabled = TRUE)`.\n\n-   We can put an informative title showing the specification of the simulated model.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nformula <- purrr::map2(ar, seq_along(ar), function(par, t){\n  \n  if(par > 0 & t > 1) {\n    par <- str_c(\"+ \", par)\n  }\n  \n  stringr::str_glue(\"{ par } \\\\times X_{{ t - { i } }}\", i = t)\n  \n  }) \n  \nformula <- purrr::reduce(formula, str_c, sep = \" \")\n\nformula <- str_c(\"$$ X_t = \", formula, \" + \\\\epsilon_t$$\")\n```\n:::\n\n\n```{.r .cell-code}\ncat(formula)\n```\n\n$$ X_t = 0.85 \\times X_{ t - 1 } -0.1 \\times X_{ t - 2 } + 0.2 \\times X_{ t - 3 } + \\epsilon_t$$\n\n\nAlternatively, formula using subscript and superscript tags.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nformula <- purrr::map2(ar, seq_along(ar), function(par, t){\n  \n  if(par > 0 & t > 1) {\n    par <- str_c(\"+ \", par)\n  }\n  \n  htmltools::tagList(par, \"×\", \"X\", tags$sub(stringr::str_glue(\"t - { i }\", i = t)))\n  \n}) \n\nformula <- purrr::reduce(formula, htmltools::tagList)\n\nformula <- str_c(\"X\", tags$sub(\"t\") %>% as.character(), \" = \",formula %>% as.character(), \" + &epsilon;\",  tags$sub(\"t\") %>% as.character())\n```\n:::\n\n\n```{.r .cell-code}\ncat(formula)\n```\n\nX<sub>t</sub> = 0.85\n×\nX\n<sub>t - 1</sub>\n-0.1\n×\nX\n<sub>t - 2</sub>\n+ 0.2\n×\nX\n<sub>t - 3</sub> + &epsilon;<sub>t</sub>\n\n\n-   Helper button to remove last values.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrm_poinst_fn <- \"function () {\n  for (var i = 1; i <= 500; i++) {\n    if (this.series[0].data.length) {\n      this.series[0].data[0].remove();\n    }\n  }\n}\"\n```\n:::\n\n\n-   And others tweaks.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhighchart() %>% \n  hc_add_series(data = ts, name = \"Process\") %>% \n  hc_chart(\n    events = list(load = JS(load_fn_glued)), \n    animation = list(duration = time*1000/2)\n    ) %>% \n  hc_title(text = \"Autoregressive process\") %>%\n  hc_subtitle(text = as.character(formula), useHTML = TRUE) %>% \n  hc_plotOptions(series = list(marker = list(enabled = FALSE))) %>% \n  hc_tooltip(valueDecimals = 3) %>% \n  hc_xAxis(width = \"95%\") %>% \n  hc_exporting(\n    enabled = TRUE,\n    buttons = list(\n      list(\n        text =  \"Remove last 500 values\",\n        onclick = JS(rm_poinst_fn),\n        theme = list(stroke = 'silver')\n        )\n      )\n    ) %>% \n  hc_yAxis_multiples(\n    # default axis\n    list(\n      title = list(text = \"\"),\n      plotLines = list(\n        list(value = 0, width = 2, color = \"#AAA\", zIndex = 1)\n        )\n      ),\n    # opposite axis\n    list(\n      title = list(text = \"\"),\n      linkedTo = 0,\n      opposite = TRUE,\n      gridLineWidth = 0,\n      tickPositioner = JS(tick_post_fn)\n    )\n  ) %>% \n  hc_navigator(\n    enabled = TRUE, \n    series = list(type = \"line\"),\n    xAxis = list(labels = list(enabled = FALSE), width = \"95%\")\n  ) \n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"highchart html-widget html-fill-item\" id=\"htmlwidget-8da8f43ecf6f55281890\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-8da8f43ecf6f55281890\">{\"x\":{\"hc_opts\":{\"chart\":{\"reflow\":true,\"events\":{\"load\":\"function () {\\n\\n\\tdot = (a, b) => a.map((x, i) => a[i] * b[i]).reduce((m, n) => m + n);\\n  function randn_bm() {\\n  \\tvar u = 0, v = 0;\\n    while(u === 0) u = Math.random(); //Converting [0,1) to (0,1)\\n    while(v === 0) v = Math.random();\\n    return Math.sqrt( -2.0 * Math.log( u ) ) * Math.cos( 2.0 * Math.PI * v );\\n   }\\n  \\n\\tvar dat = [-4.172,-6.993,-6.458,-6.46,-5.176,-5.944,-5.448,-5.063,-4.854,-5.728];\\n  var ar = [0.85,-0.1,0.2];\\n  dat = dat.slice(-ar.length);\\n  \\n  // set up the updating of the chart each second\\n  var series = this.series[0];\\n  \\n  setInterval(function () {\\n      \\n      console.log(dat);\\n      var new_value = dot(dat, ar) + randn_bm();\\n      new_value = Math.round(1000 * new_value)/1000\\n      console.log(new_value)\\n      dat.shift(); \\n      dat.push(new_value);\\n      series.addPoint([new_value]);  \\n      \\n      //if (series.data.length < 500) {\\n      //  series.addPoint([new_value], true, false);\\n      //} else {\\n      //  series.addPoint([new_value], true, true);\\n      //}\\n      \\n  }, 1000);\\n  \\n}\"},\"animation\":{\"duration\":500}},\"title\":{\"text\":\"Autoregressive process\"},\"yAxis\":[{\"title\":{\"text\":\"\"},\"plotLines\":[{\"value\":0,\"width\":2,\"color\":\"#AAA\",\"zIndex\":1}]},{\"title\":{\"text\":\"\"},\"linkedTo\":0,\"opposite\":true,\"gridLineWidth\":0,\"tickPositioner\":\"function(min,max){        \\n  var data = this.chart.yAxis[0].series[0].processedYData;\\n  //last point\\n  return [Math.round(1000 * data[data.length-1])/1000]; \\n}\"}],\"credits\":{\"enabled\":false},\"exporting\":{\"enabled\":true,\"buttons\":[{\"text\":\"Remove last 500 values\",\"onclick\":\"function () {\\n  for (var i = 1; i <= 500; i++) {\\n    if (this.series[0].data.length) {\\n      this.series[0].data[0].remove();\\n    }\\n  }\\n}\",\"theme\":{\"stroke\":\"silver\"}}]},\"boost\":{\"enabled\":false},\"plotOptions\":{\"series\":{\"label\":{\"enabled\":false},\"turboThreshold\":0,\"marker\":{\"enabled\":false}},\"treemap\":{\"layoutAlgorithm\":\"squarified\"}},\"series\":[{\"data\":[-4.172,-6.993,-6.458,-6.46,-5.176,-5.944,-5.448,-5.063,-4.854,-5.728],\"name\":\"Process\"}],\"subtitle\":{\"text\":\"X<sub>t<\\/sub> = 0.85\\n×\\nX\\n<sub>t - 1<\\/sub>\\n-0.1\\n×\\nX\\n<sub>t - 2<\\/sub>\\n+ 0.2\\n×\\nX\\n<sub>t - 3<\\/sub> + &epsilon;<sub>t<\\/sub>\",\"useHTML\":true},\"tooltip\":{\"valueDecimals\":3},\"xAxis\":{\"width\":\"95%\"},\"navigator\":{\"enabled\":true,\"series\":{\"type\":\"line\"},\"xAxis\":{\"labels\":{\"enabled\":false},\"width\":\"95%\"}}},\"theme\":{\"colors\":[\"#d35400\",\"#2980b9\",\"#2ecc71\",\"#f1c40f\",\"#2c3e50\",\"#7f8c8d\"],\"chart\":{\"style\":{\"fontFamily\":\"-apple-system, BlinkMacSystemFont, \\\"Segoe UI\\\", Roboto, Helvetica, Arial, sans-serif, \\\"Apple Color Emoji\\\", \\\"Segoe UI Emoji\\\", \\\"Segoe UI Symbol\\\"\",\"color\":\"#666666\"}},\"title\":{\"align\":\"left\",\"style\":{\"fontFamily\":\"-apple-system, BlinkMacSystemFont, \\\"Segoe UI\\\", Roboto, Helvetica, Arial, sans-serif, \\\"Apple Color Emoji\\\", \\\"Segoe UI Emoji\\\", \\\"Segoe UI Symbol\\\"\",\"fontWeight\":\"bold\"}},\"subtitle\":{\"align\":\"left\",\"style\":{\"fontFamily\":\"-apple-system, BlinkMacSystemFont, \\\"Segoe UI\\\", Roboto, Helvetica, Arial, sans-serif, \\\"Apple Color Emoji\\\", \\\"Segoe UI Emoji\\\", \\\"Segoe UI Symbol\\\"\"}},\"legend\":{\"align\":\"right\",\"verticalAlign\":\"bottom\",\"itemStyle\":{\"fontWeight\":\"normal\",\"color\":\"#A2A39C\"}},\"xAxis\":{\"gridLineWidth\":1,\"gridLineColor\":\"#F3F3F3\",\"lineColor\":\"#F3F3F3\",\"minorGridLineColor\":\"#F3F3F3\",\"tickColor\":\"#F3F3F3\",\"tickWidth\":1},\"yAxis\":{\"gridLineColor\":\"#F3F3F3\",\"lineColor\":\"#F3F3F3\",\"minorGridLineColor\":\"#F3F3F3\",\"tickColor\":\"#F3F3F3\",\"tickWidth\":1},\"plotOptions\":{\"line\":{\"marker\":{\"enabled\":false}},\"spline\":{\"marker\":{\"enabled\":false}},\"area\":{\"marker\":{\"enabled\":false}},\"areaspline\":{\"marker\":{\"enabled\":false}},\"arearange\":{\"marker\":{\"enabled\":false}},\"bubble\":{\"maxSize\":\"10%\"}},\"credits\":{\"style\":{\"fontFamily\":\"-apple-system, BlinkMacSystemFont, \\\"Segoe UI\\\", Roboto, Helvetica, Arial, sans-serif, \\\"Apple Color Emoji\\\", \\\"Segoe UI Emoji\\\", \\\"Segoe UI Symbol\\\"\"}}},\"conf_opts\":{\"global\":{\"Date\":null,\"VMLRadialGradientURL\":\"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png\",\"canvasToolsURL\":\"http =//code.highcharts.com/list(version)/modules/canvas-tools.js\",\"getTimezoneOffset\":null,\"timezoneOffset\":0,\"useUTC\":true},\"lang\":{\"contextButtonTitle\":\"Chart context menu\",\"decimalPoint\":\".\",\"downloadCSV\":\"Download CSV\",\"downloadJPEG\":\"Download JPEG image\",\"downloadPDF\":\"Download PDF document\",\"downloadPNG\":\"Download PNG image\",\"downloadSVG\":\"Download SVG vector image\",\"downloadXLS\":\"Download XLS\",\"drillUpText\":\"◁ Back to {series.name}\",\"exitFullscreen\":\"Exit from full screen\",\"exportData\":{\"annotationHeader\":\"Annotations\",\"categoryDatetimeHeader\":\"DateTime\",\"categoryHeader\":\"Category\"},\"hideData\":\"Hide data table\",\"invalidDate\":null,\"loading\":\"Loading...\",\"months\":[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"noData\":\"No data to display\",\"numericSymbolMagnitude\":1000,\"numericSymbols\":[\"k\",\"M\",\"G\",\"T\",\"P\",\"E\"],\"printChart\":\"Print chart\",\"resetZoom\":\"Reset zoom\",\"resetZoomTitle\":\"Reset zoom level 1:1\",\"shortMonths\":[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"shortWeekdays\":[\"Sat\",\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\"],\"thousandsSep\":\" \",\"viewData\":\"View data table\",\"viewFullscreen\":\"View in full screen\",\"weekdays\":[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"]}},\"type\":\"chart\",\"fonts\":\"-apple-system,+BlinkMacSystemFont,+\\\"Segoe+UI\\\",+Roboto,+Helvetica,+Arial,+\\\"Apple+Color+Emoji\\\",+\\\"Segoe+UI+Emoji\\\",+\\\"Segoe+UI+Symbol\\\"\",\"debug\":false},\"evals\":[\"hc_opts.chart.events.load\",\"hc_opts.yAxis.1.tickPositioner\",\"hc_opts.exporting.buttons.0.onclick\"],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\n## Extending it\n\nWe can encapsulate all this code into a function:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(highcharter)\nlibrary(stringr)\n\nsim_ar_hc <- function(ar = c(0.3, 0.2), time = 1){\n  \n   # the first values of the model\n  ts <- as.vector(arima.sim(model = list(ar = ar), n = 10))\n  ts <- round(ts, 3)\n  ts\n  \nload_fn <- \"function () {{\n\n\tdot = (a, b) => a.map((x, i) => a[i] * b[i]).reduce((m, n) => m + n);\n  function randn_bm() {{\n  \tvar u = 0, v = 0;\n    while(u === 0) u = Math.random(); //Converting [0,1) to (0,1)\n    while(v === 0) v = Math.random();\n    return Math.sqrt( -2.0 * Math.log( u ) ) * Math.cos( 2.0 * Math.PI * v );\n   }}\n  \n\tvar dat = [{ data }];\n  var ar = [{ ar }];\n  dat = dat.slice(-ar.length);\n  \n  // set up the updating of the chart each second\n  var series = this.series[0];\n  \n  setInterval(function () {{\n      \n      console.log(dat);\n      var new_value = dot(dat, ar) + randn_bm();\n      new_value = Math.round(1000 * new_value)/1000\n      console.log(new_value)\n      dat.shift(); \n      dat.push(new_value);\n      series.addPoint([new_value]);  \n      \n      //if (series.data.length < 500) {{\n      //  series.addPoint([new_value], true, false);\n      //}} else {{\n      //  series.addPoint([new_value], true, true);\n      //}}\n      \n  }}, { time });\n  \n}}\"\n  \n  load_fn_glued <- str_glue(\n    load_fn,\n    data = str_c(ts, collapse = \",\"),\n    ar = str_c(ar, collapse = \",\"),\n    time = time * 1000\n  )\n  \n  tick_post_fn <- \"function(min,max){        \n    var data = this.chart.yAxis[0].series[0].processedYData;\n    //last point\n    return [Math.round(1000 * data[data.length-1])/1000]; \n  }\"\n  \n  rm_poinst_fn <- \"function () {\n    for (var i = 1; i <= 500; i++) {\n      if (this.series[0].data.length) {\n        this.series[0].data[0].remove();\n      }\n    }\n  }\"\n    \n  formula <- purrr::map2(ar, seq_along(ar), function(par, t){\n    \n    if(par > 0 & t > 1) {\n      par <- str_c(\"+ \", par)\n    }\n    \n    htmltools::tagList(par, \"×\", \"X\", tags$sub(stringr::str_glue(\"t - { i }\", i = t)))\n    \n  }) \n  \n  formula <- purrr::reduce(formula, htmltools::tagList)\n  \n  formula <- str_c(\"X\", tags$sub(\"t\") %>% as.character(), \" = \",formula %>% as.character(), \" + &epsilon;\",  tags$sub(\"t\") %>% as.character())\n  \n  hc <- highchart() %>% \n    hc_add_series(data = ts, name = \"Process\") %>% \n    hc_chart(\n      events = list(load = JS(load_fn_glued)), \n      animation = list(duration = time*1000/2)\n      ) %>%\n    hc_title(text = \"Autoregressive process\") %>%\n    hc_subtitle(text = formula, useHTML = TRUE) %>%\n    hc_plotOptions(series = list(marker = list(enabled = FALSE))) %>%\n    hc_tooltip(valueDecimals = 3) %>%\n    hc_xAxis(width = \"95%\") %>%\n    hc_exporting(\n      enabled = TRUE,\n      buttons = list(\n        list(\n          text =  \"Remove last 500 values\",\n          onclick = JS(rm_poinst_fn),\n          theme = list(stroke = 'silver')\n          )\n        )\n      ) %>%\n    hc_yAxis_multiples(\n      # default axis\n      list(\n        title = list(text = \"\"),\n        plotLines = list(\n          list(value = 0, width = 2, color = \"#AAA\", zIndex = 1)\n          )\n        ),\n      # opposite axis\n      list(\n        title = list(text = \"\"),\n        linkedTo = 0,\n        opposite = TRUE,\n        gridLineWidth = 0,\n        tickPositioner = JS(tick_post_fn)\n      )\n    ) %>%\n    hc_navigator(\n      enabled = TRUE,\n      series = list(type = \"line\"),\n      xAxis = list(labels = list(enabled = FALSE), width = \"95%\")\n    )\n  \n  hc\n  \n}\n```\n:::\n\n\nWhite Noise:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsim_ar_hc(ar = c(0))\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"highchart html-widget html-fill-item\" id=\"htmlwidget-ea7fe97784127f0755c9\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-ea7fe97784127f0755c9\">{\"x\":{\"hc_opts\":{\"chart\":{\"reflow\":true,\"events\":{\"load\":\"function () {\\n\\n\\tdot = (a, b) => a.map((x, i) => a[i] * b[i]).reduce((m, n) => m + n);\\n  function randn_bm() {\\n  \\tvar u = 0, v = 0;\\n    while(u === 0) u = Math.random(); //Converting [0,1) to (0,1)\\n    while(v === 0) v = Math.random();\\n    return Math.sqrt( -2.0 * Math.log( u ) ) * Math.cos( 2.0 * Math.PI * v );\\n   }\\n  \\n\\tvar dat = [-0.05,-1.671,1.124,-0.561,0.732,0.602,0.286,-0.325,-0.886,-1.275];\\n  var ar = [0];\\n  dat = dat.slice(-ar.length);\\n  \\n  // set up the updating of the chart each second\\n  var series = this.series[0];\\n  \\n  setInterval(function () {\\n      \\n      console.log(dat);\\n      var new_value = dot(dat, ar) + randn_bm();\\n      new_value = Math.round(1000 * new_value)/1000\\n      console.log(new_value)\\n      dat.shift(); \\n      dat.push(new_value);\\n      series.addPoint([new_value]);  \\n      \\n      //if (series.data.length < 500) {\\n      //  series.addPoint([new_value], true, false);\\n      //} else {\\n      //  series.addPoint([new_value], true, true);\\n      //}\\n      \\n  }, 1000);\\n  \\n}\"},\"animation\":{\"duration\":500}},\"title\":{\"text\":\"Autoregressive process\"},\"yAxis\":[{\"title\":{\"text\":\"\"},\"plotLines\":[{\"value\":0,\"width\":2,\"color\":\"#AAA\",\"zIndex\":1}]},{\"title\":{\"text\":\"\"},\"linkedTo\":0,\"opposite\":true,\"gridLineWidth\":0,\"tickPositioner\":\"function(min,max){        \\n    var data = this.chart.yAxis[0].series[0].processedYData;\\n    //last point\\n    return [Math.round(1000 * data[data.length-1])/1000]; \\n  }\"}],\"credits\":{\"enabled\":false},\"exporting\":{\"enabled\":true,\"buttons\":[{\"text\":\"Remove last 500 values\",\"onclick\":\"function () {\\n    for (var i = 1; i <= 500; i++) {\\n      if (this.series[0].data.length) {\\n        this.series[0].data[0].remove();\\n      }\\n    }\\n  }\",\"theme\":{\"stroke\":\"silver\"}}]},\"boost\":{\"enabled\":false},\"plotOptions\":{\"series\":{\"label\":{\"enabled\":false},\"turboThreshold\":0,\"marker\":{\"enabled\":false}},\"treemap\":{\"layoutAlgorithm\":\"squarified\"}},\"series\":[{\"data\":[-0.05,-1.671,1.124,-0.5610000000000001,0.732,0.602,0.286,-0.325,-0.886,-1.275],\"name\":\"Process\"}],\"subtitle\":{\"text\":\"X<sub>t<\\/sub> = 0\\n×\\nX\\n<sub>t - 1<\\/sub> + &epsilon;<sub>t<\\/sub>\",\"useHTML\":true},\"tooltip\":{\"valueDecimals\":3},\"xAxis\":{\"width\":\"95%\"},\"navigator\":{\"enabled\":true,\"series\":{\"type\":\"line\"},\"xAxis\":{\"labels\":{\"enabled\":false},\"width\":\"95%\"}}},\"theme\":{\"colors\":[\"#d35400\",\"#2980b9\",\"#2ecc71\",\"#f1c40f\",\"#2c3e50\",\"#7f8c8d\"],\"chart\":{\"style\":{\"fontFamily\":\"-apple-system, BlinkMacSystemFont, \\\"Segoe UI\\\", Roboto, Helvetica, Arial, sans-serif, \\\"Apple Color Emoji\\\", \\\"Segoe UI Emoji\\\", \\\"Segoe UI Symbol\\\"\",\"color\":\"#666666\"}},\"title\":{\"align\":\"left\",\"style\":{\"fontFamily\":\"-apple-system, BlinkMacSystemFont, \\\"Segoe UI\\\", Roboto, Helvetica, Arial, sans-serif, \\\"Apple Color Emoji\\\", \\\"Segoe UI Emoji\\\", \\\"Segoe UI Symbol\\\"\",\"fontWeight\":\"bold\"}},\"subtitle\":{\"align\":\"left\",\"style\":{\"fontFamily\":\"-apple-system, BlinkMacSystemFont, \\\"Segoe UI\\\", Roboto, Helvetica, Arial, sans-serif, \\\"Apple Color Emoji\\\", \\\"Segoe UI Emoji\\\", \\\"Segoe UI Symbol\\\"\"}},\"legend\":{\"align\":\"right\",\"verticalAlign\":\"bottom\",\"itemStyle\":{\"fontWeight\":\"normal\",\"color\":\"#A2A39C\"}},\"xAxis\":{\"gridLineWidth\":1,\"gridLineColor\":\"#F3F3F3\",\"lineColor\":\"#F3F3F3\",\"minorGridLineColor\":\"#F3F3F3\",\"tickColor\":\"#F3F3F3\",\"tickWidth\":1},\"yAxis\":{\"gridLineColor\":\"#F3F3F3\",\"lineColor\":\"#F3F3F3\",\"minorGridLineColor\":\"#F3F3F3\",\"tickColor\":\"#F3F3F3\",\"tickWidth\":1},\"plotOptions\":{\"line\":{\"marker\":{\"enabled\":false}},\"spline\":{\"marker\":{\"enabled\":false}},\"area\":{\"marker\":{\"enabled\":false}},\"areaspline\":{\"marker\":{\"enabled\":false}},\"arearange\":{\"marker\":{\"enabled\":false}},\"bubble\":{\"maxSize\":\"10%\"}},\"credits\":{\"style\":{\"fontFamily\":\"-apple-system, BlinkMacSystemFont, \\\"Segoe UI\\\", Roboto, Helvetica, Arial, sans-serif, \\\"Apple Color Emoji\\\", \\\"Segoe UI Emoji\\\", \\\"Segoe UI Symbol\\\"\"}}},\"conf_opts\":{\"global\":{\"Date\":null,\"VMLRadialGradientURL\":\"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png\",\"canvasToolsURL\":\"http =//code.highcharts.com/list(version)/modules/canvas-tools.js\",\"getTimezoneOffset\":null,\"timezoneOffset\":0,\"useUTC\":true},\"lang\":{\"contextButtonTitle\":\"Chart context menu\",\"decimalPoint\":\".\",\"downloadCSV\":\"Download CSV\",\"downloadJPEG\":\"Download JPEG image\",\"downloadPDF\":\"Download PDF document\",\"downloadPNG\":\"Download PNG image\",\"downloadSVG\":\"Download SVG vector image\",\"downloadXLS\":\"Download XLS\",\"drillUpText\":\"◁ Back to {series.name}\",\"exitFullscreen\":\"Exit from full screen\",\"exportData\":{\"annotationHeader\":\"Annotations\",\"categoryDatetimeHeader\":\"DateTime\",\"categoryHeader\":\"Category\"},\"hideData\":\"Hide data table\",\"invalidDate\":null,\"loading\":\"Loading...\",\"months\":[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"noData\":\"No data to display\",\"numericSymbolMagnitude\":1000,\"numericSymbols\":[\"k\",\"M\",\"G\",\"T\",\"P\",\"E\"],\"printChart\":\"Print chart\",\"resetZoom\":\"Reset zoom\",\"resetZoomTitle\":\"Reset zoom level 1:1\",\"shortMonths\":[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"shortWeekdays\":[\"Sat\",\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\"],\"thousandsSep\":\" \",\"viewData\":\"View data table\",\"viewFullscreen\":\"View in full screen\",\"weekdays\":[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"]}},\"type\":\"chart\",\"fonts\":\"-apple-system,+BlinkMacSystemFont,+\\\"Segoe+UI\\\",+Roboto,+Helvetica,+Arial,+\\\"Apple+Color+Emoji\\\",+\\\"Segoe+UI+Emoji\\\",+\\\"Segoe+UI+Symbol\\\"\",\"debug\":false},\"evals\":[\"hc_opts.chart.events.load\",\"hc_opts.yAxis.1.tickPositioner\",\"hc_opts.exporting.buttons.0.onclick\"],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\nSome traditional AR model:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsim_ar_hc(ar = c(.8, .1))\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"highchart html-widget html-fill-item\" id=\"htmlwidget-f681cc05b89d5e523fc6\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-f681cc05b89d5e523fc6\">{\"x\":{\"hc_opts\":{\"chart\":{\"reflow\":true,\"events\":{\"load\":\"function () {\\n\\n\\tdot = (a, b) => a.map((x, i) => a[i] * b[i]).reduce((m, n) => m + n);\\n  function randn_bm() {\\n  \\tvar u = 0, v = 0;\\n    while(u === 0) u = Math.random(); //Converting [0,1) to (0,1)\\n    while(v === 0) v = Math.random();\\n    return Math.sqrt( -2.0 * Math.log( u ) ) * Math.cos( 2.0 * Math.PI * v );\\n   }\\n  \\n\\tvar dat = [0.761,-0.731,1.2,1.083,0.258,-1.145,-0.878,-2.338,-1.951,-1.615];\\n  var ar = [0.8,0.1];\\n  dat = dat.slice(-ar.length);\\n  \\n  // set up the updating of the chart each second\\n  var series = this.series[0];\\n  \\n  setInterval(function () {\\n      \\n      console.log(dat);\\n      var new_value = dot(dat, ar) + randn_bm();\\n      new_value = Math.round(1000 * new_value)/1000\\n      console.log(new_value)\\n      dat.shift(); \\n      dat.push(new_value);\\n      series.addPoint([new_value]);  \\n      \\n      //if (series.data.length < 500) {\\n      //  series.addPoint([new_value], true, false);\\n      //} else {\\n      //  series.addPoint([new_value], true, true);\\n      //}\\n      \\n  }, 1000);\\n  \\n}\"},\"animation\":{\"duration\":500}},\"title\":{\"text\":\"Autoregressive process\"},\"yAxis\":[{\"title\":{\"text\":\"\"},\"plotLines\":[{\"value\":0,\"width\":2,\"color\":\"#AAA\",\"zIndex\":1}]},{\"title\":{\"text\":\"\"},\"linkedTo\":0,\"opposite\":true,\"gridLineWidth\":0,\"tickPositioner\":\"function(min,max){        \\n    var data = this.chart.yAxis[0].series[0].processedYData;\\n    //last point\\n    return [Math.round(1000 * data[data.length-1])/1000]; \\n  }\"}],\"credits\":{\"enabled\":false},\"exporting\":{\"enabled\":true,\"buttons\":[{\"text\":\"Remove last 500 values\",\"onclick\":\"function () {\\n    for (var i = 1; i <= 500; i++) {\\n      if (this.series[0].data.length) {\\n        this.series[0].data[0].remove();\\n      }\\n    }\\n  }\",\"theme\":{\"stroke\":\"silver\"}}]},\"boost\":{\"enabled\":false},\"plotOptions\":{\"series\":{\"label\":{\"enabled\":false},\"turboThreshold\":0,\"marker\":{\"enabled\":false}},\"treemap\":{\"layoutAlgorithm\":\"squarified\"}},\"series\":[{\"data\":[0.761,-0.731,1.2,1.083,0.258,-1.145,-0.878,-2.338,-1.951,-1.615],\"name\":\"Process\"}],\"subtitle\":{\"text\":\"X<sub>t<\\/sub> = 0.8\\n×\\nX\\n<sub>t - 1<\\/sub>\\n+ 0.1\\n×\\nX\\n<sub>t - 2<\\/sub> + &epsilon;<sub>t<\\/sub>\",\"useHTML\":true},\"tooltip\":{\"valueDecimals\":3},\"xAxis\":{\"width\":\"95%\"},\"navigator\":{\"enabled\":true,\"series\":{\"type\":\"line\"},\"xAxis\":{\"labels\":{\"enabled\":false},\"width\":\"95%\"}}},\"theme\":{\"colors\":[\"#d35400\",\"#2980b9\",\"#2ecc71\",\"#f1c40f\",\"#2c3e50\",\"#7f8c8d\"],\"chart\":{\"style\":{\"fontFamily\":\"-apple-system, BlinkMacSystemFont, \\\"Segoe UI\\\", Roboto, Helvetica, Arial, sans-serif, \\\"Apple Color Emoji\\\", \\\"Segoe UI Emoji\\\", \\\"Segoe UI Symbol\\\"\",\"color\":\"#666666\"}},\"title\":{\"align\":\"left\",\"style\":{\"fontFamily\":\"-apple-system, BlinkMacSystemFont, \\\"Segoe UI\\\", Roboto, Helvetica, Arial, sans-serif, \\\"Apple Color Emoji\\\", \\\"Segoe UI Emoji\\\", \\\"Segoe UI Symbol\\\"\",\"fontWeight\":\"bold\"}},\"subtitle\":{\"align\":\"left\",\"style\":{\"fontFamily\":\"-apple-system, BlinkMacSystemFont, \\\"Segoe UI\\\", Roboto, Helvetica, Arial, sans-serif, \\\"Apple Color Emoji\\\", \\\"Segoe UI Emoji\\\", \\\"Segoe UI Symbol\\\"\"}},\"legend\":{\"align\":\"right\",\"verticalAlign\":\"bottom\",\"itemStyle\":{\"fontWeight\":\"normal\",\"color\":\"#A2A39C\"}},\"xAxis\":{\"gridLineWidth\":1,\"gridLineColor\":\"#F3F3F3\",\"lineColor\":\"#F3F3F3\",\"minorGridLineColor\":\"#F3F3F3\",\"tickColor\":\"#F3F3F3\",\"tickWidth\":1},\"yAxis\":{\"gridLineColor\":\"#F3F3F3\",\"lineColor\":\"#F3F3F3\",\"minorGridLineColor\":\"#F3F3F3\",\"tickColor\":\"#F3F3F3\",\"tickWidth\":1},\"plotOptions\":{\"line\":{\"marker\":{\"enabled\":false}},\"spline\":{\"marker\":{\"enabled\":false}},\"area\":{\"marker\":{\"enabled\":false}},\"areaspline\":{\"marker\":{\"enabled\":false}},\"arearange\":{\"marker\":{\"enabled\":false}},\"bubble\":{\"maxSize\":\"10%\"}},\"credits\":{\"style\":{\"fontFamily\":\"-apple-system, BlinkMacSystemFont, \\\"Segoe UI\\\", Roboto, Helvetica, Arial, sans-serif, \\\"Apple Color Emoji\\\", \\\"Segoe UI Emoji\\\", \\\"Segoe UI Symbol\\\"\"}}},\"conf_opts\":{\"global\":{\"Date\":null,\"VMLRadialGradientURL\":\"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png\",\"canvasToolsURL\":\"http =//code.highcharts.com/list(version)/modules/canvas-tools.js\",\"getTimezoneOffset\":null,\"timezoneOffset\":0,\"useUTC\":true},\"lang\":{\"contextButtonTitle\":\"Chart context menu\",\"decimalPoint\":\".\",\"downloadCSV\":\"Download CSV\",\"downloadJPEG\":\"Download JPEG image\",\"downloadPDF\":\"Download PDF document\",\"downloadPNG\":\"Download PNG image\",\"downloadSVG\":\"Download SVG vector image\",\"downloadXLS\":\"Download XLS\",\"drillUpText\":\"◁ Back to {series.name}\",\"exitFullscreen\":\"Exit from full screen\",\"exportData\":{\"annotationHeader\":\"Annotations\",\"categoryDatetimeHeader\":\"DateTime\",\"categoryHeader\":\"Category\"},\"hideData\":\"Hide data table\",\"invalidDate\":null,\"loading\":\"Loading...\",\"months\":[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"noData\":\"No data to display\",\"numericSymbolMagnitude\":1000,\"numericSymbols\":[\"k\",\"M\",\"G\",\"T\",\"P\",\"E\"],\"printChart\":\"Print chart\",\"resetZoom\":\"Reset zoom\",\"resetZoomTitle\":\"Reset zoom level 1:1\",\"shortMonths\":[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"shortWeekdays\":[\"Sat\",\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\"],\"thousandsSep\":\" \",\"viewData\":\"View data table\",\"viewFullscreen\":\"View in full screen\",\"weekdays\":[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"]}},\"type\":\"chart\",\"fonts\":\"-apple-system,+BlinkMacSystemFont,+\\\"Segoe+UI\\\",+Roboto,+Helvetica,+Arial,+\\\"Apple+Color+Emoji\\\",+\\\"Segoe+UI+Emoji\\\",+\\\"Segoe+UI+Symbol\\\"\",\"debug\":false},\"evals\":[\"hc_opts.chart.events.load\",\"hc_opts.yAxis.1.tickPositioner\",\"hc_opts.exporting.buttons.0.onclick\"],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\n## Let it shine (with {shiny} package)\n\nIn this case we can update the highcharts using the new set of proxy functions. You can check the code of the shiny app in https://github.com/jbkunst/shiny-apps-edu/ and the app live is in https://jbkunst.shinyapps.io/arma-process\n\n\n```{=html}\n<iframe src=\"https://jbkunst.shinyapps.io/arma-process\" height=\"750px\", width=\"100%\"></iframe>\n```\n\n\n## References\n\n-   https://jsfiddle.net/gh/get/library/pure/highcharts/highcharts/tree/master/samples/highcharts/demo/dynamic-update\n-   https://jsfiddle.net/BlackLabel/evypfr1L/\n-   http://jsfiddle.net/upt4cbqj/\n-   http://www.java2s.com/Tutorials/highcharts/Example/Series_Data/Remove_first_data_item_from_series.htm\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/htmlwidgets-1.6.4/htmlwidgets.js\"></script>\r\n<script src=\"../../site_libs/jquery-3.5.1/jquery.min.js\"></script>\r\n<script src=\"../../site_libs/proj4js-2.3.15/proj4.js\"></script>\r\n<link href=\"../../site_libs/highcharts-10.2.0/css/motion.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/highcharts-10.2.0/highcharts.js\"></script>\r\n<script src=\"../../site_libs/highcharts-10.2.0/highcharts-3d.js\"></script>\r\n<script src=\"../../site_libs/highcharts-10.2.0/highcharts-more.js\"></script>\r\n<script src=\"../../site_libs/highcharts-10.2.0/modules/stock.js\"></script>\r\n<script src=\"../../site_libs/highcharts-10.2.0/modules/map.js\"></script>\r\n<script src=\"../../site_libs/highcharts-10.2.0/modules/data.js\"></script>\r\n<script src=\"../../site_libs/highcharts-10.2.0/modules/exporting.js\"></script>\r\n<script src=\"../../site_libs/highcharts-10.2.0/modules/offline-exporting.js\"></script>\r\n<script src=\"../../site_libs/highcharts-10.2.0/modules/drilldown.js\"></script>\r\n<script src=\"../../site_libs/highcharts-10.2.0/modules/item-series.js\"></script>\r\n<script src=\"../../site_libs/highcharts-10.2.0/modules/overlapping-datalabels.js\"></script>\r\n<script src=\"../../site_libs/highcharts-10.2.0/modules/annotations.js\"></script>\r\n<script src=\"../../site_libs/highcharts-10.2.0/modules/export-data.js\"></script>\r\n<script src=\"../../site_libs/highcharts-10.2.0/modules/funnel.js\"></script>\r\n<script src=\"../../site_libs/highcharts-10.2.0/modules/heatmap.js\"></script>\r\n<script src=\"../../site_libs/highcharts-10.2.0/modules/treemap.js\"></script>\r\n<script src=\"../../site_libs/highcharts-10.2.0/modules/sankey.js\"></script>\r\n<script src=\"../../site_libs/highcharts-10.2.0/modules/dependency-wheel.js\"></script>\r\n<script src=\"../../site_libs/highcharts-10.2.0/modules/organization.js\"></script>\r\n<script src=\"../../site_libs/highcharts-10.2.0/modules/solid-gauge.js\"></script>\r\n<script src=\"../../site_libs/highcharts-10.2.0/modules/streamgraph.js\"></script>\r\n<script src=\"../../site_libs/highcharts-10.2.0/modules/sunburst.js\"></script>\r\n<script src=\"../../site_libs/highcharts-10.2.0/modules/vector.js\"></script>\r\n<script src=\"../../site_libs/highcharts-10.2.0/modules/wordcloud.js\"></script>\r\n<script src=\"../../site_libs/highcharts-10.2.0/modules/xrange.js\"></script>\r\n<script src=\"../../site_libs/highcharts-10.2.0/modules/tilemap.js\"></script>\r\n<script src=\"../../site_libs/highcharts-10.2.0/modules/venn.js\"></script>\r\n<script src=\"../../site_libs/highcharts-10.2.0/modules/gantt.js\"></script>\r\n<script src=\"../../site_libs/highcharts-10.2.0/modules/timeline.js\"></script>\r\n<script src=\"../../site_libs/highcharts-10.2.0/modules/parallel-coordinates.js\"></script>\r\n<script src=\"../../site_libs/highcharts-10.2.0/modules/bullet.js\"></script>\r\n<script src=\"../../site_libs/highcharts-10.2.0/modules/coloraxis.js\"></script>\r\n<script src=\"../../site_libs/highcharts-10.2.0/modules/dumbbell.js\"></script>\r\n<script src=\"../../site_libs/highcharts-10.2.0/modules/lollipop.js\"></script>\r\n<script src=\"../../site_libs/highcharts-10.2.0/modules/series-label.js\"></script>\r\n<script src=\"../../site_libs/highcharts-10.2.0/plugins/motion.js\"></script>\r\n<script src=\"../../site_libs/highcharts-10.2.0/custom/reset.js\"></script>\r\n<script src=\"../../site_libs/highcharts-10.2.0/modules/boost.js\"></script>\r\n<script src=\"../../site_libs/highchart-binding-0.9.4.9000/highchart.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}